{
  "swagger": "2.0",
  "info": {
    "title": "用户权限 API",
    "description": "用于建立用户-角色-权限的关系",
    "version": "1.0"
  },
  "produces": [
    "application/json"
  ],
  "consumes": [
    "application/json"
  ],
  "basePath": "/",
  "security": [
    {
      "cmApiKey": []
    }
  ],
  "paths": {

    "/auth/login": {
      "post": {
        "operationId": "user_login",
        "parameters": [
          {
            "$ref": "#/parameters/credentials"
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/Success"
          }
        }
      }
    },

    "/auth/signup": {
      "post": {
        "operationId": "user_signup",
        "parameters": [
          {
            "$ref": "#/parameters/credentials"
          }
        ],
        "responses": {
          "200": {"$ref": "#/responses/Success"}
        }
      }
    },

    "/api/users": {
      "get": {
        "operationId": "user_findAll",
        "tags": [
          "user"
        ],
        "parameters": [
          {
            "name": "_perPage",
            "type": "integer",
            "in": "query"
          },
          {
            "name": "_page",
            "type": "integer",
            "in": "query"
          },
          {
            "name": "_sortField",
            "type": "string",
            "in": "query"
          },
          {
            "name": "_sortDir",
            "type": "string",
            "in": "query",
            "enum": [
              "ASC",
              "DESC"
            ]
          },
          {
            "name": "_filters",
            "type": "string",
            "in": "query"
          }
        ],
        "responses": {
          "200": {"$ref": "#/responses/Success"}
        }
      },
      "post": {
        "operationId": "user_create",
        "tags": [
          "user"
        ],
        "parameters": [
          {
            "name": "data",
            "in": "body",
            "description": "实体数据",
            "schema": {
              "$ref": "#/definitions/User"
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/Success"
          },
          "default": {
            "$ref": "#/responses/Error"
          }
        }
      }
    },
    "/api/users/{id}": {
      "get": {
        "operationId": "user_findById",
        "tags": [
          "user"
        ],
        "parameters": [
          {
            "$ref": "#/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/Success"
          }
        }
      },
      "put": {
        "operationId": "user_update",
        "tags": [
          "user"
        ],
        "parameters": [
          {
            "$ref": "#/parameters/id"
          },
          {
            "name": "data",
            "in": "body",
            "description": "实体数据",
            "schema": {
              "$ref": "#/definitions/User"
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/Success"
          }
        }
      },
      "delete": {
        "operationId": "user_destroy",
        "tags": [
          "user"
        ],
        "parameters": [
          {
            "$ref": "#/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/Success"
          }
        }
      }
    }
  },
  "definitions": {
    "User": {
      "properties": {
        "username": {
          "type": "string"
        },
        "password": {
          "type": "string"
        },
        "disabled": {
          "type": "boolean"
        }
      }
    },
    "id": {
      "type": "string",
      "default": "id"
    },
    "Error": {
      "properties": {
        "code": {
          "type": "integer"
        },
        "message": {
          "type": "string"
        },
        "detail": {
          "type": "object"
        }
      }
    },
    "Credential": {
      "properties": {
        "username": {
          "type": "string"
        },
        "password": {
          "type": "string"
        }
      }
    },
    "Pagination": {
      "properties": {
        "_page": {
          "type": "number"
        },
        "_perPage": {
          "type": "number"
        }
      }
    }
  },

  "parameters": {
    "id": {
      "name": "id",
      "description": "实体 ID",
      "in": "path",
      "required": true,
      "type": "string"
    },
    "credentials": {
      "name": "credentials",
      "description": "凭证",
      "in": "body",
      "schema": {
        "$ref": "#/definitions/Credential"
      }
    },
    "code": {
      "description": "编码",
      "name": "code",
      "in": "query",
      "type": "string"
    },
    "perpage": {
      "description": "每页条数",
      "name": "_perPage",
      "in": "query",
      "type": "integer"
    },
    "page": {
      "description": "分页页数",
      "name": "_page",
      "in": "query",
      "type": "integer"
    },
    "filters": {
      "description": "筛选条件",
      "name": "_filters",
      "in": "body",
      "schema": {
        "$ref": "#/definitions/Pagination"
      }
    }
  },

  "responses": {
    "Success": {
      "description": "成功"
    },
    "Error": {
      "description": "失败"
    }
  },

  "securityDefinitions": {
    "cmApiKey": {
      "type": "apiKey",
      "name": "cm-api-key",
      "in": "header"
    }
  }
}
